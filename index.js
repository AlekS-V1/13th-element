import{i as h,A as H,S as N,P as _,a as G}from"./assets/vendor-BQynP5co.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const z=document.querySelector(".loader");function k(){u.classList.remove("hidden")}function E(){z.classList.add("hidden")}const $="https://furniture-store.b.goit.study/api",y=document.querySelector(".categories-filter"),m=document.querySelector(".furniture-list"),u=document.querySelector(".load-more-btn");let c=[],a=[],g=null,D=8,V=[];async function K(){try{k();const e=await fetch(`${$}/categories`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const r=await e.json();V=r,U(r)}catch(e){console.error("Помилка завантаження категорій",e)}finally{E()}}function U(e){y.innerHTML="";const r={"Всі товари":"./img/furniture-img/stylish.jpg","М'які меблі":"./img/furniture-img/modern.jpg","Шафи та системи зберігання":"./img/furniture-img/sleek.jpg","Ліжка та матраци":"./img/furniture-img/queen.jpg",Столи:"./img/furniture-img/oak.jpg","Стільці та табурети":"./img/furniture-img/set.jpg",Кухні:"./img/furniture-img/kitchen.jpg","Меблі для дитячої":"./img/furniture-img/bright.jpg","Меблі для офісу":"./img/furniture-img/home.jpg","Меблі для передпокою":"./img/furniture-img/entryway.jpg","Меблі для ванної кімнати":"./img/furniture-img/contemporary.jpg","Садові та вуличні меблі":"./img/furniture-img/cozy.jpg","Декор та аксесуари":"./img/furniture-img/curated.jpg"},t=document.createElement("li");t.classList.add("category-button"),t.dataset.categoryId="",t.innerHTML=`
    <img src="${r["Всі товари"]}" alt="Всі товари" />
    <span>Всі товари</span>
  `,t.classList.add("active"),t.addEventListener("click",()=>C("")),y.appendChild(t),e.forEach(n=>{const s=document.createElement("li");s.classList.add("category-button"),s.dataset.categoryId=n._id;const i=r[n.name];s.innerHTML=`
    <img src="${i}" alt="${n.name}" />
    <span>${n.name}</span>
  `,s.addEventListener("click",()=>C(n._id)),y.appendChild(s)})}function C(e){g=e||null,a=[],y.querySelectorAll("li").forEach(t=>{t.dataset.categoryId===String(e)?t.classList.add("active"):t.classList.remove("active")}),M()}async function J(){try{k();const e=10;let r=1,t=[],n=8;do{const i=await(await fetch(`${$}/furnitures?page=${r}&limit=${e}`)).json();if(!Array.isArray(i.furnitures))throw new Error("Неправильна відповідь API");t=t.concat(i.furnitures),r===8&&i.total&&(n=Math.ceil(i.total/e)),r++}while(r<=n);c=t,M()}catch(e){console.error("Помилка завантаження товарів:",e)}finally{E()}}function M(){if(m.innerHTML="",a=[],!Array.isArray(c)){console.error("Дані не є масивом:",c),m.innerHTML="Помилка завантаження",u.style.display="none";return}const e=g?c.filter(r=>{var t;return String((t=r.category)==null?void 0:t._id)===String(g)}):c;if(e.length===0){m.innerHTML="Товарів не знайдено",u.style.display="none";return}u.style.display="block",A(e)}function A(e){const r=e.slice(a.length,a.length+D);a=a.concat(r),r.forEach(t=>{const n=document.createElement("li");n.classList.add("furniture-card");const s=(t.color||[]).map(i=>`<span class="set" style="background-color: ${i};"></span>`).join("");n.innerHTML=`
            <img src="${t.images[0]}" alt="${t.name}" />
            <div class="info">
                <h3 class="title">${t.name}</h3>
                <div class="color-container">
                    ${s}
                    </div>
                <p class="price">${t.price} грн</p>
                <button class="details-btn" data-id="${t._id}">Детальніше</button>
            </div>
        `,m.appendChild(n)}),a.length>=e.length&&(u.style.display="none")}u.addEventListener("click",()=>{const e=g?c.filter(r=>{var t;return((t=r.category)==null?void 0:t._id)===g}):c;A(e)});m.addEventListener("click",async e=>{if(e.target.classList.contains("details-btn")){const r=e.target.dataset.id;try{k();const n=await(await fetch(`${$}/furnitures/${r}`)).json();showModal(n)}catch(t){console.error("Помилка завантаження деталей товару",t)}finally{E()}}});K();J();const v=document.getElementById("orderModalBackdrop"),W=document.getElementById("orderModalCloseBtn"),o=document.getElementById("orderForm");let Q=null;const X="#1212ca",I=document.getElementById("loader");function L(){v.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),o.reset(),x()}W.addEventListener("click",L);v.addEventListener("click",e=>{e.target===v&&L()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!v.classList.contains("is-hidden")&&L()});function Y(){I.classList.remove("hidden")}function Z(){I.classList.add("hidden")}o.addEventListener("submit",async e=>{e.preventDefault();const r=o.elements.email,t=o.elements.tel,n=o.elements.comment,s=r.value.trim(),i=t.value.trim(),f=n.value.trim();x();let b=!1;if(s||(P(r,"Поле Email обов’язкове"),b=!0),i||(P(t,"Поле Телефон обов’язкове"),b=!0),b){h.error({title:"Помилка",message:"Заповніть всі обов’язкові поля.",position:"topRight"});return}Y();const O={email:s,phone:i,modelId:Q,color:X,comment:f},l=o.querySelector('button[type="submit"]');l.disabled=!0,l.textContent="Надсилання...",l.style.cursor="wait";try{const p=await fetch("https://furniture-store.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!p.ok){const R=await p.json();throw new Error(R.message||"Не вдалося надіслати заявку")}h.success({title:"Готово",message:"Заявка успішно надіслана!",position:"topRight"}),L()}catch(p){h.error({title:"Помилка",message:p.message,position:"topRight"})}finally{Z(),l.disabled=!1,l.textContent="Надіслати заявку",l.style.cursor="pointer"}});function P(e,r){e.classList.add("input-error");let t=e.nextElementSibling;if(t&&t.classList.contains("error-message")){t.textContent=r;return}t=document.createElement("div"),t.className="error-message",t.textContent=r,e.insertAdjacentElement("afterend",t)}function S(e){e.classList.remove("input-error");const r=e.nextElementSibling;r&&r.classList.contains("error-message")&&r.remove()}function x(){S(o.elements.email),S(o.elements.tel)}new H(".accordion-container",{duration:400,triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",showMultiple:!1});const w="/13th-element/assets/sprite-C6TkBnLG.svg",ee=document.querySelector(".feedback-list"),q=document.querySelector(".loader"),T=document.querySelector(".feedback-btn-left"),F=document.querySelector(".feedback-btn-right"),te=document.querySelector(".feedback-pagination-btn-wrap");let d,j=!1;async function re(){const e="https://furniture-store.b.goit.study/api/feedbacks",r=new URLSearchParams({page:1,limit:10});return(await G(`${e}?${r}`)).data}function se(){q.classList.remove("hidden")}function ne(){q.classList.add("hidden")}function ie(e){h.error({message:e,backgroundColor:"#ef4040",messageColor:"#fff",position:"topRight"})}function B(){const e=d.isBeginning,r=d.isEnd;T.disabled=e,F.disabled=r}function oe(e){const r=Math.round(e*2)/2,t=`value-${Math.floor(r)}`,n=r%1!==0?"half":"";return`
    <div class="rating rating-small rating-static ${t} ${n} star-svg">
      <div class="star-container">
        ${[...Array(5)].map(()=>`
          <div class="star star-svg">
            <svg class="star-empty"><use xlink:href="${w}#star-empty"></use></svg>
            <svg class="star-half"><use xlink:href="${w}#star-half"></use></svg>
            <svg class="star-filled"><use xlink:href="${w}#star-filled"></use></svg>
          </div>
        `).join("")}
      </div>
    </div>
  `}function ae(e){return e.map(({descr:r,name:t,rate:n})=>`
      <div class="feedback-card swiper-slide">
        ${oe(n)}
        <p class="feedback-text feedback-opinion">"${r}"</p>
        <p class="feedback-text feedback-user">${t}</p>
      </div>
    `).join("")}async function ce(){se();try{const e=await re(),r=ae(e.feedbacks);ee.insertAdjacentHTML("beforeend",r),d||(d=new N(".swiper",{modules:[_],direction:"horizontal",loop:!1,slidesPerView:1,slidesPerGroup:1,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},on:{slideChange:B}}),B()),j||(T.addEventListener("click",()=>d.slidePrev()),F.addEventListener("click",()=>d.slideNext()),j=!0),te.classList.remove("hidden")}catch{ie("Failed to fetch data from API.")}finally{ne()}}ce();
//# sourceMappingURL=index.js.map
