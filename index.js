import{i as u,A as S,S as $,P as x,a as A}from"./assets/vendor-Cxast_l0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const f=document.getElementById("orderModalBackdrop"),O=document.getElementById("orderModalCloseBtn"),i=document.getElementById("orderForm");let I=null;const M="#1212ca",L=document.getElementById("loader");function m(){f.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),i.reset(),k()}O.addEventListener("click",m);f.addEventListener("click",e=>{e.target===f&&m()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!f.classList.contains("is-hidden")&&m()});function R(){L.classList.remove("hidden")}function F(){L.classList.add("hidden")}i.addEventListener("submit",async e=>{e.preventDefault();const t=i.elements.email,r=i.elements.tel,o=i.elements.comment,s=t.value.trim(),n=r.value.trim(),l=o.value.trim();k();let p=!1;if(s||(h(t,"Поле Email обов’язкове"),p=!0),n||(h(r,"Поле Телефон обов’язкове"),p=!0),p){u.error({title:"Помилка",message:"Заповніть всі обов’язкові поля.",position:"topRight"});return}R();const P={email:s,phone:n,modelId:I,color:M,comment:l},a=i.querySelector('button[type="submit"]');a.disabled=!0,a.textContent="Надсилання...",a.style.cursor="wait";try{const d=await fetch("https://furniture-store.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!d.ok){const B=await d.json();throw new Error(B.message||"Не вдалося надіслати заявку")}u.success({title:"Готово",message:"Заявка успішно надіслана!",position:"topRight"}),m()}catch(d){u.error({title:"Помилка",message:d.message,position:"topRight"})}finally{F(),a.disabled=!1,a.textContent="Надіслати заявку",a.style.cursor="pointer"}});function h(e,t){e.classList.add("input-error");let r=e.nextElementSibling;if(r&&r.classList.contains("error-message")){r.textContent=t;return}r=document.createElement("div"),r.className="error-message",r.textContent=t,e.insertAdjacentElement("afterend",r)}function v(e){e.classList.remove("input-error");const t=e.nextElementSibling;t&&t.classList.contains("error-message")&&t.remove()}function k(){v(i.elements.email),v(i.elements.tel)}new S(".accordion-container",{duration:400,triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",showMultiple:!1});const g="/13th-element/assets/sprite-C6TkBnLG.svg",q=document.querySelector(".feedback-list"),E=document.querySelector(".loader"),w=document.querySelector(".feedback-btn-left"),C=document.querySelector(".feedback-btn-right"),N=document.querySelector(".feedback-pagination-btn-wrap");let c,y=!1;async function j(){const e="https://furniture-store.b.goit.study/api/feedbacks",t=new URLSearchParams({page:1,limit:10});return(await A(`${e}?${t}`)).data}function T(){E.classList.remove("hidden")}function G(){E.classList.add("hidden")}function D(e){u.error({message:e,backgroundColor:"#ef4040",messageColor:"#fff",position:"topRight"})}function b(){const e=c.isBeginning,t=c.isEnd;w.disabled=e,C.disabled=t}function V(e){const t=Math.round(e*2)/2,r=`value-${Math.floor(t)}`,o=t%1!==0?"half":"";return`
    <div class="rating rating-small rating-static ${r} ${o} star-svg">
      <div class="star-container">
        ${[...Array(5)].map(()=>`
          <div class="star star-svg">
            <svg class="star-empty"><use xlink:href="${g}#star-empty"></use></svg>
            <svg class="star-half"><use xlink:href="${g}#star-half"></use></svg>
            <svg class="star-filled"><use xlink:href="${g}#star-filled"></use></svg>
          </div>
        `).join("")}
      </div>
    </div>
  `}function z(e){return e.map(({descr:t,name:r,rate:o})=>`
      <div class="feedback-card swiper-slide">
        ${V(o)}
        <p class="feedback-text feedback-opinion">"${t}"</p>
        <p class="feedback-text feedback-user">${r}</p>
      </div>
    `).join("")}async function K(){T();try{const e=await j(),t=z(e.feedbacks);q.insertAdjacentHTML("beforeend",t),c||(c=new $(".swiper",{modules:[x],direction:"horizontal",loop:!1,slidesPerView:1,slidesPerGroup:1,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},on:{slideChange:b}}),b()),y||(w.addEventListener("click",()=>c.slidePrev()),C.addEventListener("click",()=>c.slideNext()),y=!0),N.classList.remove("hidden")}catch{D("Failed to fetch data from API.")}finally{G()}}K();
//# sourceMappingURL=index.js.map
