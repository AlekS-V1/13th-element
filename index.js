import{i as f,A as ne,S as oe,P as re,a as ae}from"./assets/vendor-CF832OiW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();const P=document.querySelector(".burger-btn"),u=document.getElementById("burgerMenu"),N=document.querySelector(".nav-close-btn"),ie=document.getElementById("scrollBtn"),ce=document.getElementById("scrollBtnMob");P.addEventListener("click",le);N.addEventListener("click",y);document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});document.addEventListener("click",e=>{!u.contains(e.target)&&!P.contains(e.target)&&y()});function le(){u.classList.toggle("active"),u.classList.toggle("hidden"),document.body.classList.toggle("lock-scroll")}function y(){u.classList.remove("active"),u.classList.add("hidden"),document.body.classList.remove("lock-scroll")}ie.addEventListener("click",()=>{const e=document.getElementById("furniture");e&&(e.scrollIntoView({behavior:"smooth"}),y())});ce.addEventListener("click",()=>{const e=document.getElementById("furniture");e&&(e.scrollIntoView({behavior:"smooth"}),y())});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",s=>{s.preventDefault();const t=document.querySelector(e.getAttribute("href"));t&&(t.scrollIntoView({behavior:"smooth"}),y())})});P.addEventListener("click",()=>{u.classList.remove("hidden")});N.addEventListener("click",()=>{u.classList.add("hidden")});const de="/13th-element/assets/stylish-Dqo5oq3C.jpg",me="/13th-element/assets/modern-J_kvLfFL.jpg",ue="/13th-element/assets/sleek-C30s73-A.jpg",ge="/13th-element/assets/queen-B7tkavt8.jpg",fe="/13th-element/assets/oak-DakKBIED.jpg",he="/13th-element/assets/set-Dtjhia4P.jpg",pe="/13th-element/assets/kitchen-BoEn3sgN.jpg",ye="/13th-element/assets/bright-De7NjDCn.jpg",ve="/13th-element/assets/home-zeC1L-28.jpg",Le="/13th-element/assets/entryway-oGIQsDok.jpg",be="/13th-element/assets/contemporary-DDgJR1x4.jpg",Ee="/13th-element/assets/cozy-3tapdv1w.jpg",ke="/13th-element/assets/curated-Dja47ruf.jpg",p="/13th-element/assets/sprite-BS--p_P6.svg";window.addEventListener("load",()=>{we();const e=document.querySelector(".close-btn");e&&e.addEventListener("click",A)});let C=[],l=null;function A(){document.getElementById("modal").classList.add("is-hidden"),document.body.classList.remove("modal-open")}var _;(_=document.querySelector(".order-btn"))==null||_.addEventListener("click",Se);function Se(){var o;let e=document.querySelector('[name="email"]').value,s=document.querySelector('[name="tel"]').value,t=document.querySelector('[name="comment"]').value;A();const n=document.getElementById("orderModalBackdrop");n?(n.classList.remove("is-hidden"),document.body.classList.add("modal-open")):console.warn("Backdrop модального вікна замовлення не знайдено"),s.replace(/\D/g,""),l==null||l._id,(o=l==null?void 0:l.color)!=null&&o[0]}async function we(){try{C=(await(await fetch("https://furniture-store.b.goit.study/api/furnitures")).json()).furnitures;const t=C[0];M(t),z(t)}catch(e){console.error("Помилка при отриманні меблів:",e)}}function $e(e){const t=Math.round(e*2)/2;let n="";for(let o=1;o<=5;o++)t>=o?n+=`
        <div class="modal-star star-svg">
          <svg class="star-filled"><use xlink:href="${p}#star-filled"></use></svg>
        </div>`:t+.5===o?n+=`
        <div class="modal-star star-svg">
          <svg class="star-half"><use xlink:href="${p}#star-half"></use></svg>
        </div>`:n+=`
        <div class="modal-star star-svg">
          <svg class="star-empty"><use xlink:href="${p}#star-empty"></use></svg>
        </div>`;return`
    <div class="rating-star rating-small rating-static star-svg">
      <div class="star-container">
        ${n}
      </div>
    </div>
  `}function M(e){document.querySelector(".order-btn").dataset.id=e.id,document.querySelector(".model-name").textContent=e.name,document.querySelector(".model-name").classList.add("highlight-name"),document.querySelector(".category").textContent=e.type,document.querySelector(".category").classList.add("highlight-type"),document.querySelector(".modal-price").textContent=`${e.price} грн`,document.querySelector(".modal-price").classList.add("price-style");const s=document.querySelector(".modal-rating");s&&(s.innerHTML=$e(e.rate)),document.querySelector(".modal-rating").classList.add("rating-style"),document.querySelector(".description").textContent=e.description,document.querySelector(".description").classList.add("description-style"),document.querySelector(".dimensions").textContent=`Розміри: ${e.sizes}`,document.querySelector(".dimensions").classList.add("dimensions-style");const t=document.querySelector(".main-image");Array.isArray(e.images)&&e.images.length>0?(t.src=e.images[0],t.alt=e.name):(t.src="default.jpg",t.alt="Зображення недоступне");const n=document.querySelector(".thumbs");n.innerHTML="",Array.isArray(e.images)&&e.images.length>1&&e.images.slice(1).forEach((o,r)=>{const a=document.createElement("img");a.src=o,a.alt=`${e.name} view ${r+2}`,a.classList.add("thumb-image"),n.appendChild(a)}),(!Array.isArray(e.images)||e.images.length===0)&&(t.src="default.jpg",t.alt="Зображення недоступне"),z(e),l=e}function z(e){const s=document.getElementById("color-filters");s.innerHTML="",Array.isArray(e.color)?e.color.forEach(t=>{const n=document.createElement("label");n.innerHTML=`
      <input type="checkbox" value="${t}" class="color-checkbox" onchange="filterByColor()" />
      <span class="color-circle" style="background:${t};"></span>
    `,s.appendChild(n)}):console.warn("Поле color відсутнє або не є масивом:",e)}window.filterByColor=function(){const e=Array.from(document.querySelectorAll("#color-filters input:checked")).map(t=>t.value);if(e.length===0){M(C[0]);return}const s=C.find(t=>t.color.some(n=>e.includes(n)));s?M(s):alert("Немає меблів з таким кольором")};let V=[];const G=document.querySelector(".loader"),c=document.querySelector(".load-more-btn"),q=document.querySelector(".categories-filter"),E=document.querySelector(".furniture-list");function w(){G.classList.remove("hidden"),c.classList.add("hidden"),c.disabled=!0}function $(){G.classList.add("hidden"),c.classList.remove("hidden"),c.disabled=!1}const J="https://furniture-store.b.goit.study/api";let m=[],d=[],k=null,Be=8,qe=[];async function Ce(){try{w();const e=await fetch(`${J}/categories`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();qe=s,Ae(s)}catch(e){console.error("Помилка завантаження категорій",e)}finally{$()}}function Ae(e){q.innerHTML="";const s={"Всі товари":de,"М'які меблі":me,"Шафи та системи зберігання":ue,"Ліжка та матраци":ge,Столи:fe,"Стільці та табурети":he,Кухні:pe,"Меблі для дитячої":ye,"Меблі для офісу":ve,"Меблі для передпокою":Le,"Меблі для ванної кімнати":be,"Садові та вуличні меблі":Ee,"Декор та аксесуари":ke},t=document.createElement("li");t.classList.add("category-button"),t.dataset.categoryId="",t.innerHTML=`
    <img src="${s["Всі товари"]}" alt="Всі товари" />
    <span>Всі товари</span>
  `,t.classList.add("active"),t.addEventListener("click",()=>X("")),q.appendChild(t),e.forEach(n=>{const o=document.createElement("li");o.classList.add("category-button"),o.dataset.categoryId=n._id;const r=s[n.name];o.innerHTML=`
    <img src="${r}" alt="${n.name}" />
    <span>${n.name}</span>
  `,o.addEventListener("click",()=>X(n._id)),q.appendChild(o)})}function X(e){k=e||null,d=[],q.querySelectorAll("li").forEach(t=>{t.dataset.categoryId===String(e)?t.classList.add("active"):t.classList.remove("active")}),w(),setTimeout(()=>{K(),$()},300)}async function Me(){try{w();const e=10;let s=1,t=[],n=8;do{const r=await(await fetch(`${J}/furnitures?page=${s}&limit=${e}`)).json();if(!Array.isArray(r.furnitures))throw new Error("Неправильна відповідь API");t=t.concat(r.furnitures),s===8&&r.total&&(n=Math.ceil(r.total/e)),s++}while(s<=n);m=t,K()}catch(e){console.error("Помилка завантаження товарів:",e)}finally{$()}}function K(){if(E.innerHTML="",d=[],!Array.isArray(m)){console.error("Дані не є масивом:",m),E.innerHTML="Помилка завантаження",c.style.display="none";return}const e=k?m.filter(s=>{var t;return String((t=s.category)==null?void 0:t._id)===String(k)}):m;if(e.length===0){E.innerHTML="Товарів не знайдено",c.style.display="none";return}c.style.display="block",U(e)}function U(e){const s=e.slice(d.length,d.length+Be);d=d.concat(s),s.forEach(t=>{const n=document.createElement("li");n.classList.add("furniture-card");const o=(t.color||[]).map(r=>`
          <span class="set" style="background-color: ${r};"></span>`).join("");n.innerHTML=`
            <img src="${t.images[0]}" alt="${t.name}" />
            <div class="info">
                <h3 class="title">${t.name}</h3>
                <div class="color-container">
                    ${o}
                    </div>
                <p class="price">${t.price} грн</p>
                <button class="details-btn" data-id="${t._id}">Детальніше</button>
            </div>
        `,E.appendChild(n),V.push({id:t._id,name:t.name,price:t.price,sizes:t.sizes||"Невідомо",color:t.color||[],images:Array.isArray(t.images)?t.images:[],description:t.description||"Опис недоступний",rate:t.rate||0,type:t.type||"Без категорії"})}),d.length>=e.length&&(c.style.display="none")}c.addEventListener("click",()=>{w(),setTimeout(()=>{const e=k?m.filter(s=>{var t;return((t=s.category)==null?void 0:t._id)===k}):m;U(e),$()},300)});E.addEventListener("click",async e=>{if(e.target.classList.contains("details-btn")){const s=e.target.dataset.id;try{w();const t=V.find(n=>n.id===s);t?Ie(t):console.warn("Товар не знайдено в локальному масиві")}catch(t){console.error("Помилка завантаження деталей товару",t)}finally{$()}}});function Ie(e){M(e);const s=document.getElementById("modal");s.classList.remove("is-hidden"),document.body.classList.add("modal-open"),s.addEventListener("click",n=>{n.target===s&&(A(),s.classList.add("is-hidden"))}),s.querySelector(".close-btn").addEventListener("click",()=>{A(),s.classList.add("is-hidden")})}Ce();Me();const S=document.getElementById("orderModalBackdrop"),Pe=document.getElementById("orderModalCloseBtn"),i=document.getElementById("orderForm"),W=document.querySelector(".submit-btn");let b=null;const je="#1212ca",Q=document.getElementById("loader");document.querySelectorAll(".order-btn").forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.id;if(!s){f.error({title:"Помилка",message:"ID моделі не знайдено.",position:"topRight"});return}xe(s)})});function xe(e){b=String(e),S.classList.remove("is-hidden"),document.body.classList.add("modal-open"),i.reset(),j(),i.elements.email.focus()}function I(){S.classList.add("is-hidden"),document.body.classList.remove("modal-open"),i.reset(),j()}Pe.addEventListener("click",I);S.addEventListener("click",e=>{e.target===S&&I()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!S.classList.contains("is-hidden")&&I()});function De(){W.disabled=!0,Q.classList.remove("hidden")}function F(){W.disabled=!1,Q.classList.add("hidden")}i.addEventListener("submit",async e=>{e.preventDefault();const s=i.elements.email,t=i.elements.tel,n=i.elements.comment,o=s.value.trim(),r=t.value.trim(),a=n.value.trim(),x=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),D=r.replace(/\D/g,""),T=/^380\d{9}$/.test(D);j();let v=!1;if(o?x||(B(s,"Введіть коректний Email"),v=!0):(B(s,"Поле Email обов’язкове"),v=!0),r?T||(B(t,"Номер телефону має бути у форматі 380XXXXXXXXX або +380XXXXXXXXX"),v=!0):(B(t,"Поле Телефон обов’язкове"),v=!0),!b||b==="null"||b.trim()===""){f.error({title:"Помилка",message:"Не вказано товар для замовлення.",position:"topRight"}),F();return}if(v){f.error({title:"Помилка",message:"Заповніть всі обов’язкові поля.",position:"topRight"});return}const te={email:o,phone:D,modelId:String(b),color:je,comment:a||"-----"},g=i.querySelector('button[type="submit"]');g.disabled=!0,g.textContent="Надсилання...",g.style.cursor="wait";try{if(x&&T){De();const L=await fetch("https://furniture-store.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!L.ok){const se=await L.json();throw new Error(se.message||"Не вдалося надіслати заявку")}const Ve=await L.json();f.success({title:"Готово",message:"Заявка успішно надіслана!",position:"topRight"}),I()}}catch(L){f.error({title:"Помилка",message:L.message,position:"topRight"})}finally{F(),g.disabled=!1,g.textContent="Надіслати заявку",g.style.cursor="pointer"}});function B(e,s){e.classList.add("input-error");let t=e.nextElementSibling;if(t&&t.classList.contains("error-message")){t.textContent=s;return}t=document.createElement("div"),t.className="error-message",t.textContent=s,e.insertAdjacentElement("afterend",t)}function R(e){e.classList.remove("input-error");const s=e.nextElementSibling;s&&s.classList.contains("error-message")&&s.remove()}function j(){R(i.elements.email),R(i.elements.tel)}new ne(".accordion-container",{duration:400,triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",showMultiple:!1});const Te=document.querySelector(".feedback-list"),Y=document.querySelector(".loader"),Z=document.querySelector(".feedback-btn-left"),ee=document.querySelector(".feedback-btn-right"),Xe=document.querySelector(".feedback-pagination-btn-wrap");let h,H=!1;async function Fe(){const e="https://furniture-store.b.goit.study/api/feedbacks",s=new URLSearchParams({page:1,limit:10});return(await ae(`${e}?${s}`)).data}function Re(){Y.classList.remove("hidden")}function He(){Y.classList.add("hidden")}function Oe(e){f.error({message:e,backgroundColor:"#ef4040",messageColor:"#fff",position:"topRight"})}function O(){const e=h.isBeginning,s=h.isEnd;Z.disabled=e,ee.disabled=s}function _e(e){const s=Math.round(e*2)/2,t=`value-${Math.floor(s)}`,n=s%1!==0?"half":"";return`
    <div class="rating rating-small rating-static ${t} ${n} star-svg">
      <div class="star-container">
        ${[...Array(5)].map(()=>`
          <div class="star star-svg">
            <svg class="star-empty"><use xlink:href="${p}#star-empty"></use></svg>
            <svg class="star-half"><use xlink:href="${p}#star-half"></use></svg>
            <svg class="star-filled"><use xlink:href="${p}#star-filled"></use></svg>
          </div>
        `).join("")}
      </div>
    </div>
  `}function Ne(e){return e.map(({descr:s,name:t,rate:n})=>`
      <div class="feedback-card swiper-slide">
        ${_e(n)}
        <p class="feedback-text feedback-opinion">"${s}"</p>
        <p class="feedback-text feedback-user">${t}</p>
      </div>
    `).join("")}async function ze(){Re();try{const e=await Fe(),s=Ne(e.feedbacks);Te.insertAdjacentHTML("beforeend",s),h||(h=new oe(".swiper",{modules:[re],direction:"horizontal",loop:!1,slidesPerView:1,slidesPerGroup:1,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},on:{slideChange:O}}),O()),H||(Z.addEventListener("click",()=>h.slidePrev()),ee.addEventListener("click",()=>h.slideNext()),H=!0),Xe.classList.remove("hidden")}catch{Oe("Failed to fetch data from API.")}finally{He()}}ze();
//# sourceMappingURL=index.js.map
