import{i as b,A as J,S as K,P as U,a as Q}from"./assets/vendor-BQynP5co.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const $=document.querySelector(".burger-btn"),d=document.getElementById("burgerMenu"),A=document.querySelector(".close-btn"),W=document.getElementById("scrollBtn");$.addEventListener("click",X);A.addEventListener("click",p);document.addEventListener("keydown",e=>{e.key==="Escape"&&p()});document.addEventListener("click",e=>{!d.contains(e.target)&&!$.contains(e.target)&&p()});function X(){d.classList.toggle("active"),d.classList.toggle("hidden"),document.body.classList.toggle("lock-scroll")}function p(){d.classList.remove("active"),d.classList.add("hidden"),document.body.classList.remove("lock-scroll")}W.addEventListener("click",()=>{const e=document.getElementById("furniture");e&&(e.scrollIntoView({behavior:"smooth"}),p())});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",s=>{s.preventDefault();const t=document.querySelector(e.getAttribute("href"));t&&(t.scrollIntoView({behavior:"smooth"}),p())})});$.addEventListener("click",()=>{d.classList.remove("hidden")});A.addEventListener("click",()=>{d.classList.add("hidden")});const Y="/13th-element/assets/stylish-Dqo5oq3C.jpg",Z="/13th-element/assets/modern-J_kvLfFL.jpg",ee="/13th-element/assets/sleek-C30s73-A.jpg",te="/13th-element/assets/queen-B7tkavt8.jpg",se="/13th-element/assets/oak-DakKBIED.jpg",ne="/13th-element/assets/set-Dtjhia4P.jpg",re="/13th-element/assets/kitchen-BoEn3sgN.jpg",oe="/13th-element/assets/bright-De7NjDCn.jpg",ae="/13th-element/assets/home-zeC1L-28.jpg",ce="/13th-element/assets/entryway-oGIQsDok.jpg",ie="/13th-element/assets/contemporary-DDgJR1x4.jpg",le="/13th-element/assets/cozy-3tapdv1w.jpg",de="/13th-element/assets/curated-Dja47ruf.jpg",T=document.querySelector(".loader"),a=document.querySelector(".load-more-btn"),E=document.querySelector(".categories-filter"),g=document.querySelector(".furniture-list");function y(){feature/furniture-section,T.classList.remove("hidden"),a.classList.add("hidden"),a.disabled=!0}function L(){T.classList.add("hidden"),a.classList.remove("hidden"),a.disabled=!1}const q="https://furniture-store.b.goit.study/api";let l=[],i=[],h=null,ue=8,me=[];async function fe(){try{y();const e=await fetch(`${q}/categories`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();me=s,ge(s)}catch(e){console.error("Помилка завантаження категорій",e)}finally{L()}}function ge(e){E.innerHTML="";const s={"Всі товари":Y,"М'які меблі":Z,"Шафи та системи зберігання":ee,"Ліжка та матраци":te,Столи:se,"Стільці та табурети":ne,Кухні:re,"Меблі для дитячої":oe,"Меблі для офісу":ae,"Меблі для передпокою":ce,"Меблі для ванної кімнати":ie,"Садові та вуличні меблі":le,"Декор та аксесуари":de},t=document.createElement("li");t.classList.add("category-button"),t.dataset.categoryId="",t.innerHTML=`
    <img src="${s["Всі товари"]}" alt="Всі товари" />
    <span>Всі товари</span>
  `,t.classList.add("active"),t.addEventListener("click",()=>B("")),E.appendChild(t),e.forEach(r=>{const n=document.createElement("li");n.classList.add("category-button"),n.dataset.categoryId=r._id;const o=s[r.name];n.innerHTML=`
    <img src="${o}" alt="${r.name}" />
    <span>${r.name}</span>
  `,n.addEventListener("click",()=>B(r._id)),E.appendChild(n)})}function B(e){h=e||null,i=[],E.querySelectorAll("li").forEach(t=>{t.dataset.categoryId===String(e)?t.classList.add("active"):t.classList.remove("active")}),y(),setTimeout(()=>{F(),L()},300)}async function he(){try{y();const e=10;let s=1,t=[],r=8;do{const o=await(await fetch(`${q}/furnitures?page=${s}&limit=${e}`)).json();if(!Array.isArray(o.furnitures))throw new Error("Неправильна відповідь API");t=t.concat(o.furnitures),s===8&&o.total&&(r=Math.ceil(o.total/e)),s++}while(s<=r);l=t,F()}catch(e){console.error("Помилка завантаження товарів:",e)}finally{L()}}function F(){if(g.innerHTML="",i=[],!Array.isArray(l)){console.error("Дані не є масивом:",l),g.innerHTML="Помилка завантаження",a.style.display="none";return}const e=h?l.filter(s=>{var t;return String((t=s.category)==null?void 0:t._id)===String(h)}):l;if(e.length===0){g.innerHTML="Товарів не знайдено",a.style.display="none";return}a.style.display="block",D(e)}function D(e){const s=e.slice(i.length,i.length+ue);i=i.concat(s),s.forEach(t=>{const r=document.createElement("li");r.classList.add("furniture-card");const n=(t.color||[]).map(o=>`<span class="set" style="background-color: ${o};"></span>`).join("");r.innerHTML=`
            <img src="${t.images[0]}" alt="${t.name}" />
            <div class="info">
                <h3 class="title">${t.name}</h3>
                <div class="color-container">
                    ${n}
                    </div>
                <p class="price">${t.price} грн</p>
                <button class="details-btn" data-id="${t._id}">Детальніше</button>
            </div>
        `,g.appendChild(r)}),i.length>=e.length&&(a.style.display="none")}a.addEventListener("click",()=>{y(),setTimeout(()=>{const e=h?l.filter(s=>{var t;return((t=s.category)==null?void 0:t._id)===h}):l;D(e),L()},300)});g.addEventListener("click",async e=>{if(e.target.classList.contains("details-btn")){const s=e.target.dataset.id;try{y();const r=await(await fetch(`${q}/furnitures/${s}`)).json();showModal(r)}catch(t){console.error("Помилка завантаження деталей товару",t)}finally{L()}}});fe();he();window.addEventListener("load",pe);let M=[];document.querySelectorAll(".modal-close").forEach(e=>{e.addEventListener("click",()=>{e.closest(".modal").classList.remove("active")})});async function pe(){try{M=(await(await fetch("https://furniture-store.b.goit.study/api/furnitures")).json()).furnitures;const t=M[0];ye(t),H(t)}catch(e){console.error("Помилка при отриманні меблів:",e)}}function ye(e){document.querySelector(".model-name").textContent=e.name,document.querySelector(".model-name").classList.add("highlight-name"),document.querySelector(".category").textContent=e.type,document.querySelector(".category").classList.add("highlight-type"),document.querySelector(".price").textContent=`${e.price} грн`,document.querySelector(".price").classList.add("price-style"),document.querySelector(".rating").textContent="★".repeat(Math.round(e.rate)),document.querySelector(".rating").classList.add("rating-style"),document.querySelector(".description").textContent=e.description,document.querySelector(".description").classList.add("description-style"),document.querySelector(".dimensions").textContent=`Розміри: ${e.sizes}`,document.querySelector(".dimensions").classList.add("dimensions-style");const s=document.querySelector(".main-image");s.src=e.images[0],s.alt=e.name;const t=document.querySelector(".thumbs");t.innerHTML="",e.images.slice(1).forEach((r,n)=>{const o=document.createElement("img");o.src=r,o.alt=`${e.name} view ${n+2}`,o.classList.add("thumb-image"),t.appendChild(o)}),H(e)}function H(e){const s=document.getElementById("color-filters");s.innerHTML="",e.color.forEach(t=>{const r=document.createElement("label");r.innerHTML=`
      <input type="checkbox" value="${t}" class="color-checkbox" onchange="filterByColor()" />
      <span class="color-circle" style="background:${t};"></span>
    `,s.appendChild(r)})}const k=document.getElementById("orderModalBackdrop"),Le=document.getElementById("orderModalCloseBtn"),c=document.getElementById("orderForm");let ve=null;const be="#1212ca",O=document.getElementById("loader");function w(){k.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),c.reset(),R()}Le.addEventListener("click",w);k.addEventListener("click",e=>{e.target===k&&w()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!k.classList.contains("is-hidden")&&w()});function Ee(){O.classList.remove("hidden")}function ke(){O.classList.add("hidden")}c.addEventListener("submit",async e=>{e.preventDefault();const s=c.elements.email,t=c.elements.tel,r=c.elements.comment,n=s.value.trim(),o=t.value.trim(),f=r.value.trim();R();let S=!1;if(n||(P(s,"Поле Email обов’язкове"),S=!0),o||(P(t,"Поле Телефон обов’язкове"),S=!0),S){b.error({title:"Помилка",message:"Заповніть всі обов’язкові поля.",position:"topRight"});return}Ee();const V={email:n,phone:o,modelId:ve,color:be,comment:f},u=c.querySelector('button[type="submit"]');u.disabled=!0,u.textContent="Надсилання...",u.style.cursor="wait";try{const v=await fetch("https://furniture-store.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!v.ok){const G=await v.json();throw new Error(G.message||"Не вдалося надіслати заявку")}b.success({title:"Готово",message:"Заявка успішно надіслана!",position:"topRight"}),w()}catch(v){b.error({title:"Помилка",message:v.message,position:"topRight"})}finally{ke(),u.disabled=!1,u.textContent="Надіслати заявку",u.style.cursor="pointer"}});function P(e,s){e.classList.add("input-error");let t=e.nextElementSibling;if(t&&t.classList.contains("error-message")){t.textContent=s;return}t=document.createElement("div"),t.className="error-message",t.textContent=s,e.insertAdjacentElement("afterend",t)}function j(e){e.classList.remove("input-error");const s=e.nextElementSibling;s&&s.classList.contains("error-message")&&s.remove()}function R(){j(c.elements.email),j(c.elements.tel)}new J(".accordion-container",{duration:400,triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",showMultiple:!1});const C="/13th-element/assets/sprite-BdNOMVJM.svg",we=document.querySelector(".feedback-list"),N=document.querySelector(".loader"),_=document.querySelector(".feedback-btn-left"),z=document.querySelector(".feedback-btn-right"),Se=document.querySelector(".feedback-pagination-btn-wrap");let m,I=!1;async function Ce(){const e="https://furniture-store.b.goit.study/api/feedbacks",s=new URLSearchParams({page:1,limit:10});return(await Q(`${e}?${s}`)).data}function $e(){N.classList.remove("hidden")}function qe(){N.classList.add("hidden")}function Be(e){b.error({message:e,backgroundColor:"#ef4040",messageColor:"#fff",position:"topRight"})}function x(){const e=m.isBeginning,s=m.isEnd;_.disabled=e,z.disabled=s}function Me(e){const s=Math.round(e*2)/2,t=`value-${Math.floor(s)}`,r=s%1!==0?"half":"";return`
    <div class="rating rating-small rating-static ${t} ${r} star-svg">
      <div class="star-container">
        ${[...Array(5)].map(()=>`
          <div class="star star-svg">
            <svg class="star-empty"><use xlink:href="${C}#star-empty"></use></svg>
            <svg class="star-half"><use xlink:href="${C}#star-half"></use></svg>
            <svg class="star-filled"><use xlink:href="${C}#star-filled"></use></svg>
          </div>
        `).join("")}
      </div>
    </div>
  `}function Pe(e){return e.map(({descr:s,name:t,rate:r})=>`
      <div class="feedback-card swiper-slide">
        ${Me(r)}
        <p class="feedback-text feedback-opinion">"${s}"</p>
        <p class="feedback-text feedback-user">${t}</p>
      </div>
    `).join("")}async function je(){$e();try{const e=await Ce(),s=Pe(e.feedbacks);we.insertAdjacentHTML("beforeend",s),m||(m=new K(".swiper",{modules:[U],direction:"horizontal",loop:!1,slidesPerView:1,slidesPerGroup:1,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},on:{slideChange:x}}),x()),I||(_.addEventListener("click",()=>m.slidePrev()),z.addEventListener("click",()=>m.slideNext()),I=!0),Se.classList.remove("hidden")}catch{Be("Failed to fetch data from API.")}finally{qe()}}je();
//# sourceMappingURL=index.js.map
